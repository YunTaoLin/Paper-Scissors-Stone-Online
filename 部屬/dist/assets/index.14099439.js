import{f as e,r as o,o as a,c as t,a as l,b as s,h as n,u as c,d as r,e as i,w as m,v as d,p as u,g as p,i as v,j as f,k as g,l as R,t as y,F as b,m as k,n as h,q as _,s as C,x as I}from"./vendor.c14a8287.js";!function(e=".",o="__import__"){try{self[o]=new Function("u","return import(u)")}catch(a){const t=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[o]=e=>new Promise(((a,s)=>{const n=new URL(e,t);if(self[o].moduleMap[n])return a(self[o].moduleMap[n]);const c=new Blob([`import * as m from '${n}';`,`${o}.moduleMap['${n}']=m;`],{type:"text/javascript"}),r=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(c),onerror(){s(new Error(`Failed to import: ${e}`)),l(r)},onload(){a(self[o].moduleMap[n]),l(r)}});document.head.appendChild(r)})),self[o].moduleMap={}}}("/assets/");var j={apiKey:"AIzaSyB6WCaZsYoGqeotIkZYvMj_EaeP25E7lMI",authDomain:"socket-game-f530e.firebaseapp.com",databaseURL:"https://socket-game-f530e-default-rtdb.firebaseio.com",projectId:"socket-game-f530e",storageBucket:"socket-game-f530e.appspot.com",messagingSenderId:"554022480678",appId:"1:554022480678:web:a0949656e777278ae5afe7",measurementId:"G-TN9DBP7TSL"},Y={setup:()=>(e.initializeApp(j),{})};Y.render=function(e,l,s,n,c,r){const i=o("router-view");return a(),t(i)};var w=l({state:{linkedRoom:"",role:""},mutations:{setLinkedRoom(e,o){e.linkedRoom=o},setRole(e,o){e.role=o}},actions:{}}),D={setup(o,a){const t=c(),l=r(),i=s(null),m=e.database();return{createRoom:()=>{const e=m.ref(`/room/${i.value}`);e.once("value").then((function(o){if(o.val()){const e=n(o.val().play_A.lastConnect).isAfter(n().add(-2,"m")),a=n(o.val().play_B.lastConnect).isAfter(n().add(-2,"m"));if(e&&a)return alert("已經存在該房間囉，請換一個房號ID")}e.set({play_A:{join:!0,select:null,lastConnect:n(new Date).format("YYYY/MM/DD hh:mm")},play_B:{join:!1,select:null,lastConnect:null}}).then((()=>{alert("房間建立成功"),t.commit("setLinkedRoom",i.value),t.commit("setRole","play_A"),setInterval((()=>{m.ref(`/room/${i.value}/play_A`).update({lastConnect:n(new Date).format("YYYY/MM/DD hh:mm")})}),6e4),l.push("/gameRoom")}))}))},createRoomId:i,close:()=>[a.emit("close")]}}};const M={class:"overlay"},$={class:"popup"},A={class:"createRoom"},B=i("h2",{class:"mb_16"},"創立房間",-1);D.render=function(e,o,l,s,n,c){return a(),t("div",M,[i("div",$,[i("div",{class:"close",onClick:o[1]||(o[1]=(...e)=>s.close&&s.close(...e))},"X"),i("div",A,[B,m(i("input",{type:"number",placeholder:"請輸入自訂房間ID (數字)","onUpdate:modelValue":o[2]||(o[2]=e=>s.createRoomId=e)},null,512),[[d,s.createRoomId]]),i("div",{class:"btn mt_16 mb_12",onClick:o[3]||(o[3]=(...e)=>s.createRoom&&s.createRoom(...e))},"創立")])])])};var L={setup(o,a){const t=c(),l=r(),i=s(null),m=e.database();return{joinRoom:()=>{const e=m.ref(`/room/${i.value}`);console.log("有阿"),e.once("value").then((e=>{const o=e.val();if(!o)return alert("該房間不存在喔");if(!o.play_B.lastConnect||n(o.play_B.lastConnect).isBefore(n().add(-2,"m")))t.commit("setRole","play_B");else{if(o.play_A.lastConnect&&!n(o.play_A.lastConnect).isBefore(n().add(-2,"m")))return alert("該房間人數已額滿");t.commit("setRole","play_A")}console.log(t.state.role),t.commit("setLinkedRoom",i.value),m.ref(`/room/${i.value}/${t.state.role}`).update({lastConnect:n(new Date).format("YYYY/MM/DD hh:mm"),join:!0}).then((()=>{alert("加入成功"),setInterval((()=>{m.ref(`/room/${i.value}/${t.state.role}`).update({lastConnect:n(new Date).format("YYYY/MM/DD hh:mm")})}),6e4),l.push("/gameRoom")}))}))},joinRoomId:i,close:()=>[a.emit("close")]}}};const S={class:"overlay"},U={class:"popup"},E={class:"joinRoom"},J=i("h2",{class:"mb_16"},"加入房間",-1);L.render=function(e,o,l,s,n,c){return a(),t("div",S,[i("div",U,[i("div",{class:"close",onClick:o[1]||(o[1]=(...e)=>s.close&&s.close(...e))},"X"),i("div",E,[J,m(i("input",{type:"number",placeholder:"請輸入欲加入的房間ID","onUpdate:modelValue":o[2]||(o[2]=e=>s.joinRoomId=e)},null,512),[[d,s.joinRoomId]]),i("div",{class:"btn mt_16 mb_12",onClick:o[3]||(o[3]=(...e)=>s.joinRoom&&s.joinRoom(...e))},"加入")])])])};var G={components:{CreateRoom:D,JoinRoom:L},setup:()=>({openCreateRoom:s(!1),openJoinRoom:s(!1)})};const x=f();u("data-v-7e02459f");const P={id:"EnterPage"},F=i("h1",null,"猜拳定勝負!",-1),O={class:"btn_group"},V=i("div",{class:"footer"},[i("div",{class:"item"},[i("img",{src:"/assets/剪刀.3781ad54.png",alt:""})]),i("div",{class:"item"},[i("img",{src:"/assets/布.2b9332b0.png",alt:""})]),i("div",{class:"item"},[i("img",{src:"/assets/石頭.401cfcbe.png",alt:""})])],-1);p();const q=x(((e,l,s,n,c,r)=>{const m=o("CreateRoom"),d=o("JoinRoom");return a(),t("div",P,[F,i("div",O,[i("div",{class:"btn",onClick:l[1]||(l[1]=e=>n.openCreateRoom=!0)},"創建房間"),i("div",{class:"btn",onClick:l[2]||(l[2]=e=>n.openJoinRoom=!0)},"加入房間")]),V,n.openCreateRoom?(a(),t(m,{key:0,onClose:l[3]||(l[3]=e=>n.openCreateRoom=!1)})):v("",!0),n.openJoinRoom?(a(),t(d,{key:1,onClose:l[4]||(l[4]=e=>n.openJoinRoom=!1)})):v("",!0)])}));G.render=q,G.__scopeId="data-v-7e02459f";const z=[{name:"剪刀",img:"/assets/剪刀.3781ad54.png",color:"#86bebb"},{name:"石頭",img:"/assets/石頭.401cfcbe.png",color:"#e0808b"},{name:"布",img:"/assets/布.2b9332b0.png",color:"#84bc7f"}];var H={setup(){const o=c(),a=r(),t=e.database(),l=g({name:"",img:"",color:""}),n=g({name:"",img:"",color:""}),i=s(!1),m=s(!1),d=s("");o.state.linkedRoom||a.replace("/");o.state.linkedRoom&&t.ref(`/room/${o.state.linkedRoom}/`).on("value",(e=>{var a,t,s,c;let r=e.val();if(console.log("我改變了",r),(null==(a=r.play_A)?void 0:a.join)&&(null==(t=r.play_B)?void 0:t.join)&&(i.value=!0),(null==(s=r.play_A)?void 0:s.select)&&(null==(c=r.play_B)?void 0:c.select)){const e=r["play_A"===o.state.role?"play_B":"play_A"].select,a=z.find((o=>o.name==e));a&&(n.name=a.name,n.img=a.img,n.color=a.color,(()=>{let e=l.name,o=n.name;const a=["你贏了","你輸了","雙方平手"];switch(e){case"剪刀":"剪刀"==o&&(d.value=a[2]),"石頭"==o&&(d.value=a[1]),"布"==o&&(d.value=a[0]);break;case"石頭":"剪刀"==o&&(d.value=a[0]),"石頭"==o&&(d.value=a[2]),"布"==o&&(d.value=a[1]);break;case"布":"剪刀"==o&&(d.value=a[1]),"石頭"==o&&(d.value=a[0]),"布"==o&&(d.value=a[2])}m.value=!1})())}}));const u=R((()=>o.state.linkedRoom));return{selectHandler:e=>{l.name=e.name,l.img=e.img,l.color=e.color,m.value=!0,t.ref(`/room/${o.state.linkedRoom}/${o.state.role}/`).update({select:e.name,join:!1})},selectList:z,selected:l,startGame:i,waiting:m,roomId:u,opponentSelected:n,result:d,again:()=>{l.name="",l.img="",l.color="",n.name="",n.img="",n.color="",i.value=!1,d.value="",t.ref(`/room/${o.state.linkedRoom}/${o.state.role}/`).update({select:null,join:!0})}}}};const T=f();u("data-v-7098ee03");const X={class:"wrap"},Z={class:"roomId"},K={class:"container"},N={class:"player self"},W={class:"box"},Q={key:1},ee=i("h2",null,"自己",-1),oe=i("div",{class:"vs"},"VS",-1),ae={class:"player other"},te={class:"box"},le={key:1},se=i("h2",null,"對手",-1),ne={key:0,class:"select"},ce=i("div",{class:"select_title"},"選擇出拳",-1),re={class:"group"},ie={key:1,class:"result"},me={class:"result_title"},de={class:"loading"},ue={class:"loading"};p();const pe=T(((e,o,l,s,n,c)=>(a(),t("div",X,[i("div",Z,"房間號碼："+y(s.roomId),1),i("div",K,[i("div",N,[i("div",W,[s.selected.name?(a(),t("div",{key:0,class:"selectItem",style:{backgroundColor:s.selected.color}},[i("figure",null,[i("img",{src:s.selected.img,alt:""},null,8,["src"]),i("figcaption",null,y(s.selected.name),1)])],4)):(a(),t("div",Q,"?"))]),ee]),oe,i("div",ae,[i("div",te,[s.opponentSelected.name?(a(),t("div",{key:0,class:"selectItem",style:{backgroundColor:s.opponentSelected.color}},[i("figure",null,[i("img",{src:s.opponentSelected.img,alt:""},null,8,["src"]),i("figcaption",null,y(s.opponentSelected.name),1)])],4)):(a(),t("div",le,"?"))]),se])]),s.result?(a(),t("div",ie,[i("div",me,y(s.result),1),i("div",{class:"refreshBtn",onClick:o[1]||(o[1]=e=>s.again())},"再來一次！")])):(a(),t("div",ne,[ce,i("div",re,[(a(!0),t(b,null,k(s.selectList,(e=>(a(),t("div",{class:"selectItem",style:{backgroundColor:e.color},key:e.name,onClick:o=>s.selectHandler(e)},[i("figure",null,[i("img",{src:e.img,alt:""},null,8,["src"]),i("figcaption",null,y(e.name),1)])],12,["onClick"])))),128))])])),m(i("div",de,"等待對手加入中...",512),[[h,!s.startGame]]),m(i("div",ue,"等待對手出拳...",512),[[h,s.waiting]])]))));H.render=pe,H.__scopeId="data-v-7098ee03";const ve=[{path:"/gameRoom",name:"Gameroom",component:H},{path:"/",name:"Enter",component:G},{path:"/:pathMatch(.*)*",redirect:{path:"/"}}],fe=_({history:C(),routes:ve});I(Y).use(fe).use(w).mount("#app");
