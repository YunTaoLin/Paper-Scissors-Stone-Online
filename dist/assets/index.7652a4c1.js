import{f as e,r as o,a,o as t,c as s,b as l,d as n,h as c,u as i,e as r,w as m,v as d,p,g as u,i as v,j as f,k as R,l as g,m as h,t as k,F as y,n as b,q as _,s as C,x as I,y as j}from"./vendor.0ddf27c5.js";!function(e=".",o="__import__"){try{self[o]=new Function("u","return import(u)")}catch(a){const t=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[o]=e=>new Promise(((a,l)=>{const n=new URL(e,t);if(self[o].moduleMap[n])return a(self[o].moduleMap[n]);const c=new Blob([`import * as m from '${n}';`,`${o}.moduleMap['${n}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(c),onerror(){l(new Error(`Failed to import: ${e}`)),s(i)},onload(){a(self[o].moduleMap[n]),s(i)}});document.head.appendChild(i)})),self[o].moduleMap={}}}("/Rock-Paper-Scissors-Online/dist/assets/");var D={apiKey:"AIzaSyB6WCaZsYoGqeotIkZYvMj_EaeP25E7lMI",authDomain:"socket-game-f530e.firebaseapp.com",databaseURL:"https://socket-game-f530e-default-rtdb.firebaseio.com",projectId:"socket-game-f530e",storageBucket:"socket-game-f530e.appspot.com",messagingSenderId:"554022480678",appId:"1:554022480678:web:a0949656e777278ae5afe7",measurementId:"G-TN9DBP7TSL"},S={setup(){e.initializeApp(D);let a=document.documentElement.clientHeight,t=o(!1),s=document.documentElement.clientHeight;return/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&(t.value=!1),{appHeihgt:a,isSafari:t,mainHeihgt:s}}};S.render=function(e,o,n,c,i,r){const m=a("router-view");return t(),s("div",{style:{height:c.isSafari?`${c.mainHeihgt}px`:"100vh"}},[l(m)],4)};var Y=n({state:{linkedRoom:"",role:""},mutations:{setLinkedRoom(e,o){e.linkedRoom=o},setRole(e,o){e.role=o}},actions:{}}),w={setup(a,t){const s=i(),l=r(),n=o(null),m=e.database();return{createRoom:()=>{const e=m.ref(`/room/${n.value}`);e.once("value").then((function(o){if(o.val()){const e=c(o.val().play_A.lastConnect).isAfter(c().add(-2,"m")),a=c(o.val().play_B.lastConnect).isAfter(c().add(-2,"m"));if(e&&a)return alert("已經存在該房間囉，請換一個房號")}e.set({play_A:{join:!0,select:null,lastConnect:c(new Date).format("YYYY/MM/DD hh:mm")},play_B:{join:!1,select:null,lastConnect:null}}).then((()=>{s.commit("setLinkedRoom",n.value),s.commit("setRole","play_A"),setInterval((()=>{m.ref(`/room/${n.value}/play_A`).update({lastConnect:c(new Date).format("YYYY/MM/DD hh:mm")})}),6e4),l.push("/gameRoom")}))}))},createRoomId:n,close:()=>t.emit("close")}}};const A={class:"overlay"},$={class:"popup"},M={class:"createRoom"},B=l("h2",{class:"mb_16"},"創建房間",-1),L=l("div",{class:"createRoom__title"},"請自訂房間ID：",-1);w.render=function(e,o,a,n,c,i){return t(),s("div",A,[l("div",$,[l("div",{class:"close",onClick:o[1]||(o[1]=(...e)=>n.close&&n.close(...e))},"X"),l("div",M,[B,L,m(l("input",{type:"phone",placeholder:"Create Room ID","onUpdate:modelValue":o[2]||(o[2]=e=>n.createRoomId=e)},null,512),[[d,n.createRoomId]]),l("div",{class:"btn mt_16 mb_12",onClick:o[3]||(o[3]=(...e)=>n.createRoom&&n.createRoom(...e))},"創建 Create")])])])};var P={setup(a,t){const s=i(),l=r(),n=o(null),m=e.database();return{joinRoom:()=>{m.ref(`/room/${n.value}`).once("value").then((e=>{const o=e.val();if(!o)return alert("該房間不存在喔");if(!o.play_B.lastConnect||c(o.play_B.lastConnect).isBefore(c().add(-2,"m")))s.commit("setRole","play_B");else{if(o.play_A.lastConnect&&!c(o.play_A.lastConnect).isBefore(c().add(-2,"m")))return alert("該房間人數已額滿");s.commit("setRole","play_A")}s.commit("setLinkedRoom",n.value),m.ref(`/room/${n.value}/${s.state.role}`).update({lastConnect:c(new Date).format("YYYY/MM/DD hh:mm"),join:!0}).then((()=>{setInterval((()=>{m.ref(`/room/${n.value}/${s.state.role}`).update({lastConnect:c(new Date).format("YYYY/MM/DD hh:mm")})}),6e4),l.push("/gameRoom")}))}))},joinRoomId:n,close:()=>t.emit("close")}}};const J={class:"overlay"},O={class:"popup"},U={class:"joinRoom"},E=l("h2",{class:"mb_16"},"加入房間",-1),H=l("div",{class:"createRoom__title"},"請輸入房間ID：",-1);P.render=function(e,o,a,n,c,i){return t(),s("div",J,[l("div",O,[l("div",{class:"close",onClick:o[1]||(o[1]=(...e)=>n.close&&n.close(...e))},"X"),l("div",U,[E,H,m(l("input",{type:"phone",placeholder:"Join Room ID","onUpdate:modelValue":o[2]||(o[2]=e=>n.joinRoomId=e)},null,512),[[d,n.joinRoomId]]),l("div",{class:"btn mt_16 mb_12",onClick:o[3]||(o[3]=(...e)=>n.joinRoom&&n.joinRoom(...e))},"加入 Join")])])])};var x={components:{CreateRoom:w,JoinRoom:P},setup:()=>({openCreateRoom:o(!1),openJoinRoom:o(!1)})};const G=f();p("data-v-c077d666");const T={id:"EnterPage"},F=l("h1",null,[R(" 線上猜拳"),l("br",{class:"hidden-pad-up"}),R(" Paper Scissors Rock ")],-1),V={class:"btn_group"},q=l("div",null,"創建房間+",-1),z=l("div",{class:"btn--secondaryTitle"},"Create Room",-1),W=l("div",null,"加入房間",-1),X=l("div",{class:"btn--secondaryTitle"},"Join Room",-1),Z=l("div",{class:"footer"},null,-1);u();const K=G(((e,o,n,c,i,r)=>{const m=a("CreateRoom"),d=a("JoinRoom");return t(),s("div",T,[F,l("div",V,[l("div",{class:"btn",onClick:o[1]||(o[1]=e=>c.openCreateRoom=!0)},[q,z]),l("div",{class:"btn",onClick:o[2]||(o[2]=e=>c.openJoinRoom=!0)},[W,X])]),Z,c.openCreateRoom?(t(),s(m,{key:0,onClose:o[3]||(o[3]=e=>c.openCreateRoom=!1)})):v("",!0),c.openJoinRoom?(t(),s(d,{key:1,onClose:o[4]||(o[4]=e=>c.openJoinRoom=!1)})):v("",!0)])}));x.render=K,x.__scopeId="data-v-c077d666";const N=[{name:"剪刀",img:"/Rock-Paper-Scissors-Online/dist/assets/剪刀.3781ad54.png",color:"#86bebb",en:"Scissors"},{name:"石頭",img:"/Rock-Paper-Scissors-Online/dist/assets/石頭.401cfcbe.png",color:"#e0808b",en:"Rock"},{name:"布",img:"/Rock-Paper-Scissors-Online/dist/assets/布.2b9332b0.png",color:"#84bc7f",en:"Paper"}];var Q={setup(){const a=i(),t=r(),s=e.database(),l=g({name:"",img:"",color:"",en:""}),n=g({name:"",img:"",color:"",en:""}),c=o(!1),m=o(!1),d=o(""),p=["你贏了 Win","你輸了 lose","平手 Draw"];a.state.linkedRoom||t.replace("/");a.state.linkedRoom&&s.ref(`/room/${a.state.linkedRoom}/`).on("value",(e=>{var o,t,s,i;let r=e.val();if((null==(o=r.play_A)?void 0:o.join)&&(null==(t=r.play_B)?void 0:t.join)&&(c.value=!0),(null==(s=r.play_A)?void 0:s.select)&&(null==(i=r.play_B)?void 0:i.select)){const e=r["play_A"===a.state.role?"play_B":"play_A"].select,o=N.find((o=>o.name==e));o&&(n.name=o.name,n.img=o.img,n.color=o.color,n.en=o.en,(()=>{let e=l.name,o=n.name;switch(e){case"剪刀":"剪刀"==o&&(d.value=p[2]),"石頭"==o&&(d.value=p[1]),"布"==o&&(d.value=p[0]);break;case"石頭":"剪刀"==o&&(d.value=p[0]),"石頭"==o&&(d.value=p[2]),"布"==o&&(d.value=p[1]);break;case"布":"剪刀"==o&&(d.value=p[1]),"石頭"==o&&(d.value=p[0]),"布"==o&&(d.value=p[2])}m.value=!1})())}}));const u=h((()=>a.state.linkedRoom));return{selectHandler:e=>{l.name=e.name,l.img=e.img,l.color=e.color,l.en=e.en,m.value=!0,s.ref(`/room/${a.state.linkedRoom}/${a.state.role}/`).update({select:e.name,join:!1})},selectList:N,selected:l,startGame:c,waiting:m,roomId:u,opponentSelected:n,result:d,again:()=>{l.name="",l.img="",l.color="",l.en="",n.name="",n.img="",n.color="",n.en="",c.value=!1,d.value="",s.ref(`/room/${a.state.linkedRoom}/${a.state.role}/`).update({select:null,join:!0})}}}};const ee=f();p("data-v-68dfebc4");const oe={class:"wrap"},ae={class:"roomId"},te={class:"container"},se={class:"player self"},le={class:"box"},ne={key:1},ce=l("h2",null,[R(" 自己"),l("br"),R(" You ")],-1),ie=l("div",{class:"vs"},"VS",-1),re={class:"player other"},me={class:"box"},de={key:1},pe=l("h2",null,[R("對手 "),l("br"),R("Opponent")],-1),ue={key:0,class:"select"},ve=l("div",{class:"select_title"},"選擇出拳",-1),fe={class:"group"},Re={key:1,class:"result"},ge={class:"result_title"},he=l("div",{class:"space"},null,-1),ke={class:"loading"},ye={class:"loading"};u();const be=ee(((e,o,a,n,c,i)=>(t(),s("div",oe,[l("div",ae,"房號( Room ID )："+k(n.roomId),1),l("div",te,[l("div",se,[l("div",le,[n.selected.name?(t(),s("div",{key:0,class:"selectItem",style:{backgroundColor:n.selected.color}},[l("figure",null,[l("img",{src:n.selected.img,alt:""},null,8,["src"]),l("figcaption",null,[R(k(n.selected.name)+" ",1),l("span",null,k(n.selected.en),1)])])],4)):(t(),s("div",ne,"?"))]),ce]),ie,l("div",re,[l("div",me,[n.opponentSelected.name?(t(),s("div",{key:0,class:"selectItem",style:{backgroundColor:n.opponentSelected.color}},[l("figure",null,[l("img",{src:n.opponentSelected.img,alt:""},null,8,["src"]),l("figcaption",null,[R(k(n.opponentSelected.name)+" ",1),l("span",null,k(n.opponentSelected.en),1)])])],4)):(t(),s("div",de,"?"))]),pe])]),n.result?(t(),s("div",Re,[l("div",ge,k(n.result),1),l("div",{class:"refreshBtn",onClick:o[1]||(o[1]=e=>n.again())},"再來一次！")])):(t(),s("div",ue,[ve,l("div",fe,[(t(!0),s(y,null,b(n.selectList,(e=>(t(),s("div",{class:"selectItem",style:{backgroundColor:e.color},key:e.name,onClick:o=>n.selectHandler(e)},[l("figure",null,[l("img",{src:e.img,alt:""},null,8,["src"]),l("figcaption",null,[R(k(e.name)+" ",1),l("span",null,k(e.en),1)])])],12,["onClick"])))),128))])])),he,m(l("div",ke,"等待對手加入中...",512),[[_,!n.startGame]]),m(l("div",ye,"等待對手出拳...",512),[[_,n.waiting]])]))));Q.render=be,Q.__scopeId="data-v-68dfebc4";const _e=[{path:"/gameRoom",name:"Gameroom",component:Q},{path:"/",name:"Enter",component:x},{path:"/:pathMatch(.*)*",redirect:{path:"/"}}],Ce=C({history:I("/Paper-Scissors-Rock-Online/dist"),routes:_e});let Ie=j(S);Ie.config.performance=!1,Ie.use(Ce).use(Y).mount("#app");
