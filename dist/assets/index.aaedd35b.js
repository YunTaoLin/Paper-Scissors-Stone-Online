import{f as e,r as o,a,o as t,c as n,b as s,d as l,h as c,u as i,e as r,w as m,v as d,p,g as u,i as v,j as f,k as g,l as R,m as h,t as y,F as b,n as k,q as _,s as C,x as I,y as S}from"./vendor.02c5e115.js";!function(e=".",o="__import__"){try{self[o]=new Function("u","return import(u)")}catch(a){const t=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[o]=e=>new Promise(((a,s)=>{const l=new URL(e,t);if(self[o].moduleMap[l])return a(self[o].moduleMap[l]);const c=new Blob([`import * as m from '${l}';`,`${o}.moduleMap['${l}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(c),onerror(){s(new Error(`Failed to import: ${e}`)),n(i)},onload(){a(self[o].moduleMap[l]),n(i)}});document.head.appendChild(i)})),self[o].moduleMap={}}}("/Paper-Scissors-Stone-Online/dist/assets/");var j={apiKey:"AIzaSyB6WCaZsYoGqeotIkZYvMj_EaeP25E7lMI",authDomain:"socket-game-f530e.firebaseapp.com",databaseURL:"https://socket-game-f530e-default-rtdb.firebaseio.com",projectId:"socket-game-f530e",storageBucket:"socket-game-f530e.appspot.com",messagingSenderId:"554022480678",appId:"1:554022480678:web:a0949656e777278ae5afe7",measurementId:"G-TN9DBP7TSL"},D={setup(){e.initializeApp(j);let a=document.documentElement.clientHeight,t=o(!1),n=document.documentElement.clientHeight;return/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&(t.value=!1),{appHeihgt:a,isSafari:t,mainHeihgt:n}}};D.render=function(e,o,l,c,i,r){const m=a("router-view");return t(),n("div",{style:{height:c.isSafari?`${c.mainHeihgt}px`:"100vh"}},[s(m)],4)};var Y=l({state:{linkedRoom:"",role:""},mutations:{setLinkedRoom(e,o){e.linkedRoom=o},setRole(e,o){e.role=o}},actions:{}}),w={setup(a,t){const n=i(),s=r(),l=o(null),m=e.database();return{createRoom:()=>{const e=m.ref(`/room/${l.value}`);e.once("value").then((function(o){if(o.val()){const e=c(o.val().play_A.lastConnect).isAfter(c().add(-2,"m")),a=c(o.val().play_B.lastConnect).isAfter(c().add(-2,"m"));if(e&&a)return alert("已經存在該房間囉，請換一個房號")}e.set({play_A:{join:!0,select:null,lastConnect:c(new Date).format("YYYY/MM/DD hh:mm")},play_B:{join:!1,select:null,lastConnect:null}}).then((()=>{n.commit("setLinkedRoom",l.value),n.commit("setRole","play_A"),setInterval((()=>{m.ref(`/room/${l.value}/play_A`).update({lastConnect:c(new Date).format("YYYY/MM/DD hh:mm")})}),6e4),s.push("/gameRoom")}))}))},createRoomId:l,close:()=>t.emit("close")}}};const A={class:"overlay"},$={class:"popup"},M={class:"createRoom"},B=s("h2",{class:"mb_16"},"創建房間",-1),L=s("div",{class:"createRoom__title"},"請自訂房間ID：",-1);w.render=function(e,o,a,l,c,i){return t(),n("div",A,[s("div",$,[s("div",{class:"close",onClick:o[1]||(o[1]=(...e)=>l.close&&l.close(...e))},"X"),s("div",M,[B,L,m(s("input",{type:"phone",placeholder:"Create Room ID","onUpdate:modelValue":o[2]||(o[2]=e=>l.createRoomId=e)},null,512),[[d,l.createRoomId]]),s("div",{class:"btn mt_16 mb_12",onClick:o[3]||(o[3]=(...e)=>l.createRoom&&l.createRoom(...e))},"創建 Create")])])])};var P={setup(a,t){const n=i(),s=r(),l=o(null),m=e.database();return{joinRoom:()=>{m.ref(`/room/${l.value}`).once("value").then((e=>{const o=e.val();if(!o)return alert("該房間不存在喔");if(!o.play_B.lastConnect||c(o.play_B.lastConnect).isBefore(c().add(-2,"m")))n.commit("setRole","play_B");else{if(o.play_A.lastConnect&&!c(o.play_A.lastConnect).isBefore(c().add(-2,"m")))return alert("該房間人數已額滿");n.commit("setRole","play_A")}n.commit("setLinkedRoom",l.value),m.ref(`/room/${l.value}/${n.state.role}`).update({lastConnect:c(new Date).format("YYYY/MM/DD hh:mm"),join:!0}).then((()=>{setInterval((()=>{m.ref(`/room/${l.value}/${n.state.role}`).update({lastConnect:c(new Date).format("YYYY/MM/DD hh:mm")})}),6e4),s.push("/gameRoom")}))}))},joinRoomId:l,close:()=>t.emit("close")}}};const J={class:"overlay"},O={class:"popup"},U={class:"joinRoom"},E=s("h2",{class:"mb_16"},"加入房間",-1),H=s("div",{class:"createRoom__title"},"請輸入房間ID：",-1);P.render=function(e,o,a,l,c,i){return t(),n("div",J,[s("div",O,[s("div",{class:"close",onClick:o[1]||(o[1]=(...e)=>l.close&&l.close(...e))},"X"),s("div",U,[E,H,m(s("input",{type:"phone",placeholder:"Join Room ID","onUpdate:modelValue":o[2]||(o[2]=e=>l.joinRoomId=e)},null,512),[[d,l.joinRoomId]]),s("div",{class:"btn mt_16 mb_12",onClick:o[3]||(o[3]=(...e)=>l.joinRoom&&l.joinRoom(...e))},"加入 Join")])])])};var x={components:{CreateRoom:w,JoinRoom:P},setup:()=>({openCreateRoom:o(!1),openJoinRoom:o(!1)})};const G=f();p("data-v-09796c09");const T={id:"EnterPage"},F=s("h1",null,[g(" 線上猜拳"),s("br",{class:"hidden-pad-up"}),g(" Paper Scissors Stone ")],-1),V={class:"btn_group"},q=s("div",null,"創建房間+",-1),z=s("div",{class:"btn--secondaryTitle"},"Create Room",-1),W=s("div",null,"加入房間",-1),X=s("div",{class:"btn--secondaryTitle"},"Join Room",-1),Z=s("div",{class:"footer"},null,-1);u();const K=G(((e,o,l,c,i,r)=>{const m=a("CreateRoom"),d=a("JoinRoom");return t(),n("div",T,[F,s("div",V,[s("div",{class:"btn",onClick:o[1]||(o[1]=e=>c.openCreateRoom=!0)},[q,z]),s("div",{class:"btn",onClick:o[2]||(o[2]=e=>c.openJoinRoom=!0)},[W,X])]),Z,c.openCreateRoom?(t(),n(m,{key:0,onClose:o[3]||(o[3]=e=>c.openCreateRoom=!1)})):v("",!0),c.openJoinRoom?(t(),n(d,{key:1,onClose:o[4]||(o[4]=e=>c.openJoinRoom=!1)})):v("",!0)])}));x.render=K,x.__scopeId="data-v-09796c09";const N=[{name:"剪刀",img:"/Paper-Scissors-Stone-Online/dist/assets/剪刀.3781ad54.png",color:"#86bebb",en:"Scissors"},{name:"石頭",img:"/Paper-Scissors-Stone-Online/dist/assets/石頭.401cfcbe.png",color:"#e0808b",en:"Stone"},{name:"布",img:"/Paper-Scissors-Stone-Online/dist/assets/布.2b9332b0.png",color:"#84bc7f",en:"Paper"}];var Q={setup(){const a=i(),t=r(),n=e.database(),s=R({name:"",img:"",color:"",en:""}),l=R({name:"",img:"",color:"",en:""}),c=o(!1),m=o(!1),d=o(""),p=["你贏了 Win","你輸了 lose","平手 Draw"];a.state.linkedRoom||t.replace("/");a.state.linkedRoom&&n.ref(`/room/${a.state.linkedRoom}/`).on("value",(e=>{var o,t,n,i;let r=e.val();if((null==(o=r.play_A)?void 0:o.join)&&(null==(t=r.play_B)?void 0:t.join)&&(c.value=!0),(null==(n=r.play_A)?void 0:n.select)&&(null==(i=r.play_B)?void 0:i.select)){const e=r["play_A"===a.state.role?"play_B":"play_A"].select,o=N.find((o=>o.name==e));o&&(l.name=o.name,l.img=o.img,l.color=o.color,l.en=o.en,(()=>{let e=s.name,o=l.name;switch(e){case"剪刀":"剪刀"==o&&(d.value=p[2]),"石頭"==o&&(d.value=p[1]),"布"==o&&(d.value=p[0]);break;case"石頭":"剪刀"==o&&(d.value=p[0]),"石頭"==o&&(d.value=p[2]),"布"==o&&(d.value=p[1]);break;case"布":"剪刀"==o&&(d.value=p[1]),"石頭"==o&&(d.value=p[0]),"布"==o&&(d.value=p[2])}m.value=!1})())}}));const u=h((()=>a.state.linkedRoom));return{selectHandler:e=>{s.name=e.name,s.img=e.img,s.color=e.color,s.en=e.en,m.value=!0,n.ref(`/room/${a.state.linkedRoom}/${a.state.role}/`).update({select:e.name,join:!1})},selectList:N,selected:s,startGame:c,waiting:m,roomId:u,opponentSelected:l,result:d,again:()=>{s.name="",s.img="",s.color="",s.en="",l.name="",l.img="",l.color="",l.en="",c.value=!1,d.value="",n.ref(`/room/${a.state.linkedRoom}/${a.state.role}/`).update({select:null,join:!0})}}}};const ee=f();p("data-v-75d79ff4");const oe={class:"wrap"},ae={class:"roomId"},te={class:"container"},ne={class:"player self"},se={class:"box"},le={key:1},ce=s("h2",null,[g(" 自己"),s("br"),g(" You ")],-1),ie=s("div",{class:"vs"},"VS",-1),re={class:"player other"},me={class:"box"},de={key:1},pe=s("h2",null,[g("對手 "),s("br"),g("Opponent")],-1),ue={key:0,class:"select"},ve=s("div",{class:"select_title"},"選擇出拳",-1),fe={class:"group"},ge={key:1,class:"result"},Re={class:"result_title"},he=s("div",{class:"space"},null,-1),ye={class:"loading"},be={class:"loading"};u();const ke=ee(((e,o,a,l,c,i)=>(t(),n("div",oe,[s("div",ae,"房號( Room ID )："+y(l.roomId),1),s("div",te,[s("div",ne,[s("div",se,[l.selected.name?(t(),n("div",{key:0,class:"selectItem",style:{backgroundColor:l.selected.color}},[s("figure",null,[s("img",{src:l.selected.img,alt:""},null,8,["src"]),s("figcaption",null,[g(y(l.selected.name)+" ",1),s("span",null,y(l.selected.en),1)])])],4)):(t(),n("div",le,"?"))]),ce]),ie,s("div",re,[s("div",me,[l.opponentSelected.name?(t(),n("div",{key:0,class:"selectItem",style:{backgroundColor:l.opponentSelected.color}},[s("figure",null,[s("img",{src:l.opponentSelected.img,alt:""},null,8,["src"]),s("figcaption",null,[g(y(l.opponentSelected.name)+" ",1),s("span",null,y(l.opponentSelected.en),1)])])],4)):(t(),n("div",de,"?"))]),pe])]),l.result?(t(),n("div",ge,[s("div",Re,y(l.result),1),s("div",{class:"refreshBtn",onClick:o[1]||(o[1]=e=>l.again())},"再來一次！")])):(t(),n("div",ue,[ve,s("div",fe,[(t(!0),n(b,null,k(l.selectList,(e=>(t(),n("div",{class:"selectItem",style:{backgroundColor:e.color},key:e.name,onClick:o=>l.selectHandler(e)},[s("figure",null,[s("img",{src:e.img,alt:""},null,8,["src"]),s("figcaption",null,[g(y(e.name)+" ",1),s("span",null,y(e.en),1)])])],12,["onClick"])))),128))])])),he,m(s("div",ye,"等待對手加入中...",512),[[_,!l.startGame]]),m(s("div",be,"等待對手出拳...",512),[[_,l.waiting]])]))));Q.render=ke,Q.__scopeId="data-v-75d79ff4";const _e=[{path:"/gameRoom",name:"Gameroom",component:Q},{path:"/",name:"Enter",component:x},{path:"/:pathMatch(.*)*",redirect:{path:"/"}}],Ce=C({history:I("/Paper-Scissors-Stone-Online/dist"),routes:_e});let Ie=S(D);Ie.config.performance=!1,Ie.use(Ce).use(Y).mount("#app");
