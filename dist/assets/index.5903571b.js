import{f as e,r as o,a,o as t,c as n,b as s,d as l,h as i,u as r,e as c,w as m,v as d,p as u,g as p,i as v,j as f,k as g,l as h,m as R,t as k,F as y,n as b,q as _,s as w,x as C,y as I}from"./vendor.0ddf27c5.js";!function(e=".",o="__import__"){try{self[o]=new Function("u","return import(u)")}catch(a){const t=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[o]=e=>new Promise(((a,s)=>{const l=new URL(e,t);if(self[o].moduleMap[l])return a(self[o].moduleMap[l]);const i=new Blob([`import * as m from '${l}';`,`${o}.moduleMap['${l}']=m;`],{type:"text/javascript"}),r=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(i),onerror(){s(new Error(`Failed to import: ${e}`)),n(r)},onload(){a(self[o].moduleMap[l]),n(r)}});document.head.appendChild(r)})),self[o].moduleMap={}}}("/Rock-Paper-Scissors-Online/dist/assets/");var j={apiKey:"AIzaSyB6WCaZsYoGqeotIkZYvMj_EaeP25E7lMI",authDomain:"socket-game-f530e.firebaseapp.com",databaseURL:"https://socket-game-f530e-default-rtdb.firebaseio.com",projectId:"socket-game-f530e",storageBucket:"socket-game-f530e.appspot.com",messagingSenderId:"554022480678",appId:"1:554022480678:web:a0949656e777278ae5afe7",measurementId:"G-TN9DBP7TSL"},S={setup(){e.initializeApp(j);let a=document.documentElement.clientHeight,t=o(!1),n=document.documentElement.clientHeight;return/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&(t.value=!1),{appHeihgt:a,isSafari:t,mainHeihgt:n}}};S.render=function(e,o,l,i,r,c){const m=a("router-view");return t(),n("div",{style:{height:i.isSafari?`${i.mainHeihgt}px`:"100vh"}},[s(m)],4)};var A=l({state:{linkedRoom:"",role:""},mutations:{setLinkedRoom(e,o){e.linkedRoom=o},setRole(e,o){e.role=o}},actions:{}}),D={setup(a,t){const n=r(),s=c(),l=o(null),m=e.database();return{createRoom:()=>{const e=m.ref(`/room/${l.value}`);e.once("value").then((function(o){if(o.val()){const e=i(o.val().play_A.lastConnect).isAfter(i().add(-2,"m")),a=i(o.val().play_B.lastConnect).isAfter(i().add(-2,"m"));if(e&&a)return alert("已經存在該房間囉，請換一個房號")}e.set({play_A:{join:!0,select:null,lastConnect:i(new Date).format("YYYY/MM/DD hh:mm")},play_B:{join:!1,select:null,lastConnect:null}}).then((()=>{n.commit("setLinkedRoom",l.value),n.commit("setRole","play_A"),setInterval((()=>{m.ref(`/room/${l.value}/play_A`).update({lastConnect:i(new Date).format("YYYY/MM/DD hh:mm")})}),6e4),s.push("/gameRoom")}))}))},createRoomId:l,close:()=>t.emit("close")}}};const L={class:"overlay"},Y={class:"popup"},$={class:"createRoom"},B=s("h2",{class:"mb_16"},"創建房間",-1),M=s("div",{class:"createRoom__title"},"請自訂房間ID：",-1);D.render=function(e,o,a,l,i,r){return t(),n("div",L,[s("div",Y,[s("div",{class:"close",onClick:o[1]||(o[1]=(...e)=>l.close&&l.close(...e))},"X"),s("div",$,[B,M,m(s("input",{type:"phone",placeholder:"Create Room ID","onUpdate:modelValue":o[2]||(o[2]=e=>l.createRoomId=e)},null,512),[[d,l.createRoomId]]),s("div",{class:"btn mt_16 mb_12",onClick:o[3]||(o[3]=(...e)=>l.createRoom&&l.createRoom(...e))},"創建 Create")])])])};var U={setup(a,t){const n=r(),s=c(),l=o(null),m=e.database();return{joinRoom:()=>{m.ref(`/room/${l.value}`).once("value").then((e=>{const o=e.val();if(!o)return alert("該房間不存在喔");if(!o.play_B.lastConnect||i(o.play_B.lastConnect).isBefore(i().add(-2,"m")))n.commit("setRole","play_B");else{if(o.play_A.lastConnect&&!i(o.play_A.lastConnect).isBefore(i().add(-2,"m")))return alert("該房間人數已額滿");n.commit("setRole","play_A")}n.commit("setLinkedRoom",l.value),m.ref(`/room/${l.value}/${n.state.role}`).update({lastConnect:i(new Date).format("YYYY/MM/DD hh:mm"),join:!0}).then((()=>{setInterval((()=>{m.ref(`/room/${l.value}/${n.state.role}`).update({lastConnect:i(new Date).format("YYYY/MM/DD hh:mm")})}),6e4),s.push("/gameRoom")}))}))},joinRoomId:l,close:()=>t.emit("close")}}};const P={class:"overlay"},E={class:"popup"},O={class:"joinRoom"},W=s("h2",{class:"mb_16"},"加入房間",-1),J=s("div",{class:"createRoom__title"},"請輸入房間ID：",-1);U.render=function(e,o,a,l,i,r){return t(),n("div",P,[s("div",E,[s("div",{class:"close",onClick:o[1]||(o[1]=(...e)=>l.close&&l.close(...e))},"X"),s("div",O,[W,J,m(s("input",{type:"phone",placeholder:"Join Room ID","onUpdate:modelValue":o[2]||(o[2]=e=>l.joinRoomId=e)},null,512),[[d,l.joinRoomId]]),s("div",{class:"btn mt_16 mb_12",onClick:o[3]||(o[3]=(...e)=>l.joinRoom&&l.joinRoom(...e))},"加入 Join")])])])};var H={components:{CreateRoom:D,JoinRoom:U},setup:()=>({openCreateRoom:o(!1),openJoinRoom:o(!1)})};const x=f();u("data-v-c077d666");const T={id:"EnterPage"},G=s("h1",null,[g(" 線上猜拳"),s("br",{class:"hidden-pad-up"}),g(" Paper Scissors Rock ")],-1),F={class:"btn_group"},N=s("div",null,"創建房間+",-1),V=s("div",{class:"btn--secondaryTitle"},"Create Room",-1),q=s("div",null,"加入房間",-1),z=s("div",{class:"btn--secondaryTitle"},"Join Room",-1),X=s("div",{class:"footer"},null,-1);p();const Z=x(((e,o,l,i,r,c)=>{const m=a("CreateRoom"),d=a("JoinRoom");return t(),n("div",T,[G,s("div",F,[s("div",{class:"btn",onClick:o[1]||(o[1]=e=>i.openCreateRoom=!0)},[N,V]),s("div",{class:"btn",onClick:o[2]||(o[2]=e=>i.openJoinRoom=!0)},[q,z])]),X,i.openCreateRoom?(t(),n(m,{key:0,onClose:o[3]||(o[3]=e=>i.openCreateRoom=!1)})):v("",!0),i.openJoinRoom?(t(),n(d,{key:1,onClose:o[4]||(o[4]=e=>i.openJoinRoom=!1)})):v("",!0)])}));H.render=Z,H.__scopeId="data-v-c077d666";const K=[{name:"剪刀",img:"/Rock-Paper-Scissors-Online/dist/assets/剪刀.3781ad54.png",color:"#86bebb",en:"Scissors"},{name:"石頭",img:"/Rock-Paper-Scissors-Online/dist/assets/石頭.401cfcbe.png",color:"#e0808b",en:"Rock"},{name:"布",img:"/Rock-Paper-Scissors-Online/dist/assets/布.2b9332b0.png",color:"#84bc7f",en:"Paper"}];var Q={setup(){const a=r(),t=c(),n=e.database(),s=h({name:"",img:"",color:"",en:""}),l=h({name:"",img:"",color:"",en:""}),i=o(!1),m=o(!1),d=o(""),u=["你贏了 Win","你輸了 lose","平手 Draw"];a.state.linkedRoom||t.replace("/");a.state.linkedRoom&&n.ref(`/room/${a.state.linkedRoom}/`).on("value",(e=>{var o,t,n,r;let c=e.val();if((null==(o=c.play_A)?void 0:o.join)&&(null==(t=c.play_B)?void 0:t.join)&&(i.value=!0),(null==(n=c.play_A)?void 0:n.select)&&(null==(r=c.play_B)?void 0:r.select)){const e=c["play_A"===a.state.role?"play_B":"play_A"].select,o=K.find((o=>o.name==e));o&&(l.name=o.name,l.img=o.img,l.color=o.color,l.en=o.en,(()=>{let e=s.name,o=l.name;switch(e){case"剪刀":"剪刀"==o&&(d.value=u[2]),"石頭"==o&&(d.value=u[1]),"布"==o&&(d.value=u[0]);break;case"石頭":"剪刀"==o&&(d.value=u[0]),"石頭"==o&&(d.value=u[2]),"布"==o&&(d.value=u[1]);break;case"布":"剪刀"==o&&(d.value=u[1]),"石頭"==o&&(d.value=u[0]),"布"==o&&(d.value=u[2])}m.value=!1})())}}));const p=R((()=>a.state.linkedRoom));return{selectHandler:e=>{s.name=e.name,s.img=e.img,s.color=e.color,s.en=e.en,m.value=!0,n.ref(`/room/${a.state.linkedRoom}/${a.state.role}/`).update({select:e.name,join:!1})},selectList:K,selected:s,startGame:i,waiting:m,roomId:p,opponentSelected:l,result:d,again:()=>{s.name="",s.img="",s.color="",s.en="",l.name="",l.img="",l.color="",l.en="",i.value=!1,d.value="",n.ref(`/room/${a.state.linkedRoom}/${a.state.role}/`).update({select:null,join:!0})}}}};const ee=f();u("data-v-68dfebc4");const oe={class:"wrap"},ae={class:"roomId"},te={class:"container"},ne={class:"player self"},se={class:"box"},le={key:1},ie=s("h2",null,[g(" 自己"),s("br"),g(" You ")],-1),re=s("div",{class:"vs"},"VS",-1),ce={class:"player other"},me={class:"box"},de={key:1},ue=s("h2",null,[g("對手 "),s("br"),g("Opponent")],-1),pe={key:0,class:"select"},ve=s("div",{class:"select_title"},"選擇出拳",-1),fe={class:"group"},ge={key:1,class:"result"},he={class:"result_title"},Re=s("div",{class:"space"},null,-1),ke={class:"loading"},ye={class:"loading"};p();const be=ee(((e,o,a,l,i,r)=>(t(),n("div",oe,[s("div",ae,"房號( Room ID )："+k(l.roomId),1),s("div",te,[s("div",ne,[s("div",se,[l.selected.name?(t(),n("div",{key:0,class:"selectItem",style:{backgroundColor:l.selected.color}},[s("figure",null,[s("img",{src:l.selected.img,alt:""},null,8,["src"]),s("figcaption",null,[g(k(l.selected.name)+" ",1),s("span",null,k(l.selected.en),1)])])],4)):(t(),n("div",le,"?"))]),ie]),re,s("div",ce,[s("div",me,[l.opponentSelected.name?(t(),n("div",{key:0,class:"selectItem",style:{backgroundColor:l.opponentSelected.color}},[s("figure",null,[s("img",{src:l.opponentSelected.img,alt:""},null,8,["src"]),s("figcaption",null,[g(k(l.opponentSelected.name)+" ",1),s("span",null,k(l.opponentSelected.en),1)])])],4)):(t(),n("div",de,"?"))]),ue])]),l.result?(t(),n("div",ge,[s("div",he,k(l.result),1),s("div",{class:"refreshBtn",onClick:o[1]||(o[1]=e=>l.again())},"再來一次！")])):(t(),n("div",pe,[ve,s("div",fe,[(t(!0),n(y,null,b(l.selectList,(e=>(t(),n("div",{class:"selectItem",style:{backgroundColor:e.color},key:e.name,onClick:o=>l.selectHandler(e)},[s("figure",null,[s("img",{src:e.img,alt:""},null,8,["src"]),s("figcaption",null,[g(k(e.name)+" ",1),s("span",null,k(e.en),1)])])],12,["onClick"])))),128))])])),Re,m(s("div",ke,"等待對手加入中...",512),[[_,!l.startGame]]),m(s("div",ye,"等待對手出拳...",512),[[_,l.waiting]])]))));Q.render=be,Q.__scopeId="data-v-68dfebc4";const _e=[{path:"/gameRoom",name:"Gameroom",component:Q},{path:"/",name:"Enter",component:H},{path:"/:pathMatch(.*)*",redirect:{path:"/"}}],we=w({history:C("/Paper-Scissors-Rock-Online/dist"),routes:_e}),Ce=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ie(e,o){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const a=e.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),o&&o.onUpdate&&o.onUpdate(e)):(console.log("Content is cached for offline use."),o&&o.onSuccess&&o.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}let je=I(S);je.config.performance=!1,je.use(we).use(A).mount("#app"),function(e){if("serviceWorker"in navigator){if(new URL({}.PUBLIC_URL,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const o=`${{}.PUBLIC_URL}/service-worker.js`;Ce?(!function(e,o){fetch(e,{headers:{"Service-Worker":"script"}}).then((a=>{const t=a.headers.get("content-type");404===a.status||null!=t&&-1===t.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):Ie(e,o)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(o,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Ie(o,e)}))}}();
